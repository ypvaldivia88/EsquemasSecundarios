@if (ViewBag.TipoInstalacion == "Subestacion")
{
    <small>Subestaciones</small>
    @Html.DropDownList("Subestacion", null, "", htmlAttributes: new { @class = "select2_single form-control", @id = "SelectorSubestacion" })
}
@if (ViewBag.TipoInstalacion == "Línea")
{
    <small>Líneas</small>
    @Html.DropDownList("Subestacion", null, "", htmlAttributes: new { @class = "select2_single form-control", @id = "SelectorSubestacion" })
}

<input type="hidden" id="TipoEsquema" value="@ViewBag.TipoEsquema" />

<script>
    $("#SelectorSubestacion").change(function () {
        var codsub = $(this).val();
        CargarTransformadores(codsub);
        //CargarInterruptores(subestacion,esInterruptor,esMultiple)

        var tipoesquema = $("#TipoEsquema").val();
        if (tipoesquema == "Esquema de Protección y Control del Interruptor") {            
            CargarElementosElectricos("Línea", codsub);
            CargarInterruptores(codsub, true, false);            
        }
        if (tipoesquema == "Esquema de Protección del Transformador") {
            CargarElementosElectricos("Transformador", codsub);
            CargarInterruptores(codsub, true, true);            
        }
        if (tipoesquema == "Esquema de Control - Ventilación del Transformador") {
            CargarElementosElectricos("Transformador", codsub);
        }
        if (tipoesquema == "Esquema de Control - Cambia Taps del Transformador") {
            CargarElementosElectricos("Transformador", codsub);
        }
        if (tipoesquema == "Esquema de Control – del Desconectivo") {
            CargarElementosElectricos("Ninguno", codsub);
            CargarInterruptores(codsub, false, false);            
        }
        if (tipoesquema == "Esquema de Control - Potenciales de la Barra") {
            CargarElementosElectricos("Barra", codsub);
        }
        if (tipoesquema == "Esquema de Señalización Central") {
            CargarElementosElectricos("Ninguno", codsub);
        }
        if (tipoesquema == "Esquema de Control – Cargador de Baterías") {
            CargarElementosElectricos("Ninguno", codsub);
        }
        if (tipoesquema == "Esquema de Protección – Diferencial de la Barra") {
            CargarElementosElectricos("Barra", codsub);
            CargarInterruptores(codsub, true, true);
        }
        if (tipoesquema == "Esquema de Protección DAF/DAV") {
            CargarElementosElectricos("Ninguno", codsub);
            CargarInterruptores(codsub, true, true);
        }
        if (tipoesquema == "Esquema de Control Distribución de Corriente Directa") {
            CargarElementosElectricos("Ninguno", codsub);
        }
        if (tipoesquema == "Esquema de Control Distribución de Corriente Alterna") {
            CargarElementosElectricos("Ninguno", codsub);
        }
        if (tipoesquema == "Esquema de Automática RAS (Reposición Automática del Servicio)") {
            CargarElementosElectricos("Ninguno", codsub);
            CargarInterruptores(codsub, true, true);
        }
        if (tipoesquema == "Esquema de Protección Especial de la Barra") {
            CargarElementosElectricos("Barra", codsub);
            CargarInterruptores(codsub, true, true);
        }
        if (tipoesquema == "Esquema de Protección Separadora") {
            CargarElementosElectricos("Ninguno", codsub);
        }
        if (tipoesquema == "Esquema de Automática de Líneas") {
            CargarElementosElectricos("Línea", codsub);
            CargarInterruptores(codsub, true, true);
        }
    })
</script>